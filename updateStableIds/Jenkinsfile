pipeline {
  agent any
    stages {
        stage('Setup') {
          steps {
            dir('release-common-lib') {
              sh 'mvn clean install'
            }
          }
        }
        stage('Run') {
            steps {
              dir('updateStableIds') {
    	          sh 'mvn clean compile assembly:single'
                withCredentials([file(credentialsId: 'UpdateStableIdsConfig', variable: 'configFile')]) {
                  sh "java -jar target/updateStableIds-0.0.1-SNAPSHOT-jar-with-dependencies.jar \$configFile"
                }
              }
           }
        }
    }
}
